<?php

namespace App\Http\Controllers;

use Illuminate\Http\Request;
use App\User;
use Illuminate\Foundation\Auth\RegistersUsers;
use App\Providers\RouteServiceProvider;
use Auth; 
class DaftarController extends Controller
{
    use RegistersUsers;
    protected $redirectTo = RouteServiceProvider::HOME;

    public function insert(Request $request)
    {
    	try
    	{
    		$request->request->remove('_token');
    		$request->request->remove('password_confirmation');

    		$user_id = User::insertGetId($request->all());
    		Auth::loginUsingId($user_id);
    	}
    	catch(\Exception $e){
    		return 'Error';
    	}

    	return redirect($this->redirectPath())->with('message', 'Your message');
    }
}
